/*! Bilibili-Bangumi-JS v1.0.3 | Hans362 (https://hans362.cn) | https://bilibili-bangumi-js.vercel.app | MIT License */"use strict";var bangumiJson=(apiUrl||"https://bilibili-bangumi-js.vercel.app/api")+"?vmid="+userId+"&token="+(new Date).getTime()+Math.random();function getPage(t){$.getJSON(bangumiJson+"&pn="+t,function(e){1==t?$(".bgm-collection").empty():$(".bgm-navigator").remove(),$.each(e.data.list,function(e,t){var a=0;t.is_finish?a=t.total_count:t.is_started&&"即将开播"!=t.new_ep.index_show?(a=t.new_ep.title,$.isNumeric(a)||(a=t.total_count)):a=0,a<0&&(a=0);var i=0;t.is_started?0<=t.progress.indexOf("已看完")?i=a:void 0!==t.progress&&-1==t.progress.indexOf("PV")?(i=t.progress.substring(t.progress.indexOf("第")+1,t.progress.indexOf("话")),$.isNumeric(i)||(i=a)):i=0:i=0;var s=i/a*100,n=t.cover.replace("http","https");$(".bgm-collection").append('\n            <a class="bgm-item" href="'+t.url+'" target="_blank">\n                <img class="bgm-item-thumb" src="'+n+'" referrerpolicy="no-referrer"></img>\n                <div class="bgm-item-info">\n                    <span class="bgm-item-title main">'+t.title+'</span>\n                    <span class="bgm-item-title">'+t.evaluate+'</span>\n                    <div class="bgm-item-statusBar-container">\n                        <div class="bgm-item-statusBar" style="width:'+s+'%"></div>\n                        <span class="bgm-item-percentage">进度：'+i+" / "+a+"</span>\n                    </div>\n                </div>\n            </a>\n            ")}),t<Math.ceil(e.data.total/12)&&$(".bgm-container").append('\n            <div class="bgm-navigator">\n                <a href="javascript:getPage('+(t+1)+');" class="bgm-btn">加载更多</a>\n            </div>\n            ')})}getPage(1);